<div class="p-3 bg-white">
  <div class="flex items-center justify-center">
    <!-- <div></div> -->
    <h2>Versions Log</h2>
    <!-- <p-button (click)="showDialog()" label="Add" /> -->
  </div>

  <div
    class="m-2 lg:m-4 shadow-sm overflow-hidden rounded-lg border-[1px] border-solid border-[#004d85]"
    [@fadeInDown]
  >
    <p-table
      [value]="versions"
      [paginator]="true"
      [rows]="10"
      [showCurrentPageReport]="true"
      [tableStyle]="{ 'min-width': '50rem' }"
      [loading]="loading"
      selectionMode="single"
      (onRowSelect)="onRowSelect($event)"
    >
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="changeDate">
            <div class="flex items-center">
              <span>Date</span>
              <p-sortIcon field="changeDate" class="d-inline"></p-sortIcon>
            </div>
          </th>
          <th pSortableColumn="version">
            <div class="flex items-center">
              <span>Version</span>
              <p-sortIcon field="version" class="d-inline"></p-sortIcon>
            </div>
          </th>
          <th pSortableColumn="info">
            <div class="flex items-center">
              <span>Info</span>
              <p-sortIcon field="info" class="d-inline"></p-sortIcon>
            </div>
          </th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-item>
        <tr [pSelectableRow]="item">
          <td>
            {{ item.changeDate ? getFormatDate(item.changeDate) : "-" }}
          </td>
          <td>{{ item.version }}</td>
          <td>{{ item.info }}</td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="7" class="text-center p-3">No records found</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
  <p-dialog
    header="Add/Edit Version"
    [modal]="true"
    [(visible)]="visible"
    [style]="{ width: '50rem', height: '30rem' }"
    closeOnEscape="true"
  >
    <form (ngSubmit)="onSubmit()" class="space-y-6">
      <div>
        <label for="version" class="block text-sm font-semibold text-gray-700">
          Version Name
        </label>
        <input
          pInputText
          id="version"
          class="block w-full p-2 mt-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
          [(ngModel)]="currentVersion.version"
          name="version"
          required
        />
      </div>
      <div>
        <label for="info" class="block text-sm font-semibold text-gray-700">
          Plain Description
        </label>
        <textarea
          id="info"
          rows="11"
          class="block w-full p-2 mt-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
          [(ngModel)]="currentVersion.info"
          name="info"
          required
        ></textarea>
      </div>
      <!-- <div>
        <label
          for="description"
          class="block text-sm font-semibold text-gray-700"
        >
          HTML Description
        </label>
        <textarea
          id="description"
          rows="3"
          class="block w-full p-2 mt-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
          [(ngModel)]="currentVersion.description"
          name="description"
          required
        ></textarea>
      </div> -->
      <div class="flex justify-end gap-4">
        <p-button
          label="Cancel"
          severity="secondary"
          (click)="visible = false"
          class="bg-gray-500 text-white"
        />
        <p-button label="Save" class="bg-blue-500 text-white" type="submit" />
      </div>
    </form>
  </p-dialog>
</div>
